<?php require('template/header.phtml') ?>

<div class="container-fluid py-5 custom-bg">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-8">
            <div class="row mb-5">
                <div class="col-12">
                    <h1 class="fw-bold text-white display-5">Book Your Charging Point</h1>
                </div>
            </div>

            <?php if (!empty($view->message)): ?>
                <div class="alert <?php echo (strpos($view->message, 'successful') !== false || strpos($view->message, 'Request sent') !== false) ? 'alert-success' : 'alert-danger'; ?> mb-4">
                    <?php echo $view->message; ?>
                </div>
            <?php endif; ?>


            <div class="row">
                <div class="col-12 col-md-6 mb-4">
                    <div class="card bg-dark text-white">
                        <div class="card-img-top bg-image" style="background-image: url('images/DC Fast Charger.jpg');
                        background-size: cover; background-position: center;
                        aspect-ratio: 16/9;">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">DC Fast Charger - Location A</h5>
                            <p class="card-text text-secondary">Price: $<?php echo htmlspecialchars(number_format($view->pricePerKwh, 2)); ?> per kWh</p>
                            <p class="card-text text-secondary">Availability: 24/7</p>
                            <p class="card-text text-secondary">Power Output: <?php echo htmlspecialchars($view->powerOutput); ?> kW</p>
                            <p class="card-text text-secondary">Connector Type: CCS</p>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 mb-4">
                    <div class="card bg-dark text-white">
                        <div class="card-body">
                            <h5 class="card-title mb-4">Booking Details</h5>
                            <form method="POST" action="booking.php">
                                <input type="hidden" name="charge_point_id" value="1">
                                <input type="hidden" id="pricePerKwh" value="<?php echo htmlspecialchars($view->pricePerKwh); ?>">
                                <input type="hidden" id="powerOutput" value="<?php echo htmlspecialchars($view->powerOutput); ?>">

                                <div class="mb-3">
                                    <label for="startDate" class="form-label">Start Date & Time</label>
                                    <input type="datetime-local" class="form-control" id="startDate" name="start_datetime" step="60" required>
                                </div>
                                <div class="mb-3">
                                    <label for="endDate" class="form-label">End Date & Time</label>
                                    <input type="datetime-local" class="form-control" id="endDate" name="end_datetime" required>
                                </div>

                                <div class="mb-3">
                                    <label for="totalCost" class="form-label">Estimated Total Cost</label>
                                    <input type="text" class="form-control" id="totalCost" name="cost" value="$0.00" readonly>
                                </div>
                                <button type="submit" name="submit_booking" class="btn custom-btn w-100 fw-bold">Book Now</button>
                            </form>
                            <a href="contactHomeowner.php?charge_point_id=1" class="btn btn-outline-light w-100 mt-3 fw-bold">Contact the Homeowner</a>

                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<?php if (isset($view->script)) echo $view->script; ?>
<?php require('template/footer.phtml') ?>