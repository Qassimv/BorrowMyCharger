<?php require('template/header.phtml') ?>
<div class="container-fluid py-5 custom-bg">

    <div class="row justify-content-center">
        <div class="col-12 col-lg-10">
            <div class="mb-5">
                <div class="d-flex gap-2">
                    <input type="text" id="searchChargingPoints" class="form-control bg-dark text-white border-secondary"
                        placeholder="Search charging points...">
                    <select id="filterChargingPoints" class="form-select bg-dark text-white border-secondary">
                          <option value="all">All</option>
                                <?php foreach ($view->chargerTypes as $type): ?>
                                    <option value="<?= htmlspecialchars($type) ?>"><?= htmlspecialchars($type) ?></option>
                                <?php endforeach; ?>
                    </select>
                </div>
            </div>

            <h2 class="text-white fw-bold fs-3 mb-3">All Charging Points</h2>

            <div class="row" id="chargingPointResults">
                    <?php foreach ($view->chargingPoints as $point): ?>
                  <div class="col-12 col-md-6 col-lg-3 mb-4">
                      <div class="card bg-dark text-white">
                          <div class="card-img-top bg-image"
                              style="background-image: url('images/<?= htmlspecialchars($point['image_path'] ?? 'default.jpg') ?>');
                              background-size: cover; background-position: center; aspect-ratio: 16/9;">
                          </div>
                          <div class="card-body d-flex flex-column">
                              <div>
                                  <h5 class="card-title"><?= htmlspecialchars($point['address']) ?></h5>
                                  <p class="card-text text-secondary">Price: $<?= htmlspecialchars($point['price_per_kwh']) ?> per kWh</p>
                                  <p class="card-text text-secondary">
                                      Availability: <?= $point['isAvailable'] ? 'Available' : 'Unavailable' ?>
                                  </p>
                              </div>
                              <button class="btn custom-btn mt-4 w-100 fw-bold">Book Now</button>
                          </div>
                      </div>
                  </div>
              <?php endforeach; ?>

            </div>
        </div>
    </div>
</div>
<script src="js/SearchChargingPoints.js"></script>
<?php require('template/footer.phtml') ?>
